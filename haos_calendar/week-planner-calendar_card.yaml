type: custom:week-planner-card
calendars:
  - entity: calendar.icmw_derek
    name: Derek-Work
    icon: mdi:briefcase
    color: "#4ECDC4"
  - entity: calendar.childcard_schedule
    name: Childcare
    icon: mdi:teddy-bear
    color: "#FF6B6B"
  - entity: calendar.quinn
    name: Quinn
    icon: mdi:account-cowboy-hat
    color: orange
  - entity: calendar.sawyer
    name: Sawyer
    icon: mdi:unicorn-variant
    color: pink
  - entity: calendar.family_events
    name: Family
    icon: mdi:human-male-female-child
    color: "#96CEB4"
days: "31"
startingDayOffset: 0
hideWeekend: false
noCardBackground: false
compact: true
showLegend: true
legendToggle: true
startingDay: month
showNavigation: true
grid_options:
  columns: full
dateFormat: DD
timeFormat: t
texts:
  fullDay: All-Day
  moreEvents: More...
  noEvents: " "
showTitle: true
showDescription: false
dayFormat: <big><big><b>dd</b> | </big>ccc</big>
visibility:
  - condition: state
    entity: input_select.calendar_subtab
    state: monthly
  - condition: not
    conditions:
      - condition: screen
        media_query: "(min-width: 0px) and (max-width: 767px)"
title: Monthly Calendar
card_mod:
  style: >
    /* === HEADER STYLING === */
    .header, .navigation {
      display: flex !important;
      flex-direction: column !important;
      align-items: center !important;
      text-align: center !important;
    }

    .navigation .month {
      order: 1 !important;
      font-size: 1.8em !important;
      font-weight: bold !important;
      margin-bottom: 15px !important;
    }

    .navigation ul {
      order: 2 !important;
      margin: 0 !important;
      padding: 0 !important;
      display: flex !important;
      justify-content: center !important;
    }

    .navigation ul li {
      margin: 0 10px !important;
    }

    .navigation ul li ha-icon {
      font-size: 24px !important;
      width: 40px !important;
      height: 40px !important;
      display: flex !important;
      align-items: center !important;
      justify-content: center !important;
      cursor: pointer !important;
    }

    .header::before, .header::after {
      content: "";
      display: block;
      width: 100% !important;
      height: 5px;
      background: var(--divider-color);
    }

    .header::before { margin: 1px 0 3px 0; order: 2 !important; }
    .header::after  { margin: 3px 0 12px 0; order: 4 !important; }


    /* === LEGEND STYLING === */
    .legend {
      margin-top: 0 !important;
      padding-top: 0 !important;
      border-top: none !important;
      text-align: center !important;
      order: 3 !important;
    }

    .legend ul {
      display: flex !important;
      flex-wrap: wrap !important;
      justify-content: center !important;
      gap: 15px !important;
      margin: 0 !important;
      padding: 0 !important;
    }

    .legend ul li {
      font-size: 14px !important;
    }

    .legend ul li ha-icon {
      font-size: 16px !important;
      margin-right: 5px !important;
    }


    /* === CSS GRID FOR DAYS === */
    .container {
      display: grid !important;
      grid-template-columns: repeat(7, 1fr) !important;
      grid-template-rows: auto !important;
      gap: 2px !important;
      padding: 0 !important;
    }

    .container .header,
    .container .legend { grid-column: 1 / -1 !important; }


    /* Reorder days so Sunday is first */
    .day[data-weekday="1"] { grid-column: 2 !important; } /* Mon */
    .day[data-weekday="2"] { grid-column: 3 !important; } /* Tue */
    .day[data-weekday="3"] { grid-column: 4 !important; } /* Wed */
    .day[data-weekday="4"] { grid-column: 5 !important; } /* Thu */
    .day[data-weekday="5"] { grid-column: 6 !important; } /* Fri */
    .day[data-weekday="6"] { grid-column: 7 !important; } /* Sat */
    .day[data-weekday="7"] { grid-column: 1 !important; } /* Sun */


    /* === DAY BLOCK STYLING === */
    .day {
      background-color: rgba(255, 255, 255, 0.05) !important;
      border-radius: 5px !important;
      display: flex !important;
      flex-direction: column !important;
      justify-content: flex-start !important;
      align-items: stretch !important;
      min-height: 100px !important;
      width: 100% !important;
      padding: 0 !important;
      overflow: hidden !important;
    }
    
    .day.today { background-color: rgba(255, 255, 255, 0.15) !important; }

    .day > div,
    .day > div > div {
      display: flex !important;
      flex-direction: column !important;
      justify-content: flex-start !important;
      align-items: stretch !important;
      width: 100% !important;
      padding: 2px !important;
      background: transparent !important;
    }

    /* === EVENT GRID LAYOUT === */

    .day .event {
      display: grid !important;
      grid-template-columns: 1fr 40px !important;
      grid-template-rows: auto auto !important;
      gap: 1px 0 !important;
      width: calc(100% - 9px) !important;
      margin: 0 5px !important;
      padding: 1px !important;
      font-size: .75em !important;
      white-space: normal !important;
      word-break: break-word !important;
      position: relative !important;
    }

    .day .event .time {
      grid-row: 1;
      grid-column: 1;
      align-self: start !important;
      margin-bottom: 2px !important;
    }

    .day .event .title {
      grid-row: 2;
      grid-column: 1 / span 2;
      align-self: start !important;
      font-size: 0.9em;
      overflow: hidden;
      text-overflow: ellipsis;
      display: -webkit-box;
      -webkit-line-clamp: 3;   /* truncate to 3 lines */
      -webkit-box-orient: vertical;
      white-space: normal;
    }
    
    .day .event .icon {
      grid-row: 1 / 3 !important;
      grid-column: 2 !important;
      justify-self: end !important;
      align-self: start !important;
      transform: scale(0.75) !important;
    }
    
    .day > div > .event:first-child { margin-top: 0 !important; }

    /* === CARD TITLE DIVIDER === */
    .card-title { text-align: center !important; }

    .card-title::after {
      content: "";
      display: block;
      width: 100% !important;
      height: 5px;
      background: var(--divider-color);
      order: 4 !important;
      margin: 12px 0 3px 0;
    }

    /* === TOP SPACING ABOVE DATE (V2) === */
    .day > div:first-child { margin-top: 0 !important; padding: 6px 0 0 6px
    !important; }

    .day .date {
      margin: 0 !important;
      padding: 0 !important;
      line-height: 1.2em !important;
      font-size: 1em !important;
      position: relative;
    }


    /* Add a simple horizontal line under the date */
    .day .date::after {
      content: "";
      display: block;
      width: 95%;
      height: 1px;
      background: rgba(255, 255, 255, 0.2);
      margin-top: 4px;
    }
